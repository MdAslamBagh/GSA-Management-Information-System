@model GSA_Management_Information_System.Models.CargoSalesReport
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
@using (Html.BeginForm("Export", "CargoSalesReport", FormMethod.Post, new { onSubmit = "return SubmitForm(this)" }))
            {
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
    <div class="form-horizontal">
        <div class="container">
            <div class="card ">
                <div class="card-header bg-info">Display Report Information </div>
                <div class="row">
                    <div class="form-group">
                        <div class="form-group col-md-10 col-sm-12 ">
                            <label for="accessname" class="col-md-3 col-sm-5">Report Name<font size="2px" color="red">*</font></label>
                            <div class="col-md-6 col-sm-7">
                                <select name="ReportName" id="reportname" class="form-control">
                                    <option value="">Select Report Name </option>
                                    @foreach (var student in ViewBag.ReportList)
                                    {
                                        <option value="@student.ReportName">@student.ReportName</option>
                                    }
                                </select>
                            </div>
                        </div>

                        @*<label for="accessname" class="col-md-3 col-sm-5">Report Name<font size="2px" color="red">*</font></label>
                            <div class="col-md-6 col-sm-7">
                                @Html.DropDownList("ReportId", null, "Select Status", htmlAttributes: new { @class = "form-control", id = "droplistID" })
                                @Html.ValidationMessageFor(model => model.SubMenuId, "", new { @class = "text-danger" })
                            </div>*@



                        @*<div class="form-group">
                            <div class="col-md-6 col-sm-6">
                                <label>From Date</label>
                                @Html.EditorFor(model => model.FromDate, new { htmlAttributes = new { @class = "datepicker" } })*@
                        @*<input type="text" id="fromDate" class="datepicker form-control"

                            readonly name="FromDate" placeholder="MM-DD-YYYY" />*@
                        @*</div>
                            </div>*@

                        @*<div class="form-group">
                                <div class="col-md-6 col-sm-6">
                                    <label>To Date</label>
                                    <input type="text" id="toDate" class="datepicker form-control"
                                           readonly name="ToDate" placeholder="MM-DD-YYYY" />
                                </div>
                            </div>*@
                        <div id="datewise">
                            <div class="form-group col-md-10 col-sm-12 ">
                                <label for="accessname" class="col-md-3 col-sm-5">From Date<font size="2px" color="red">*</font></label>
                                <div class="col-md-4 col-sm-7">
                                    <div class="input-group">
                                        @*@Html.Editor("Ticket_Date", new { htmlAttributes = new { @class = "datepicker1" } })*@
                                        <input type="text" class="form-control datepicker" name="FromDate" id="DateFrom" placeholder="Date From" data-format="mm/dd/yyyy">
                                        <div class="input-group-addon">
                                            <a href="#"><i class="fa fa-calendar"></i></a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="col-sm-1">
                                        <div class="required">
                                            <input id="checkmasterdate" type="radio" value="MasterDate" checked="checked" name="Entry_Date" />
                                            @*<input type="hidden" value="false" name="CheckSSCVat" />*@
                                            @*<input type="checkbox"  onkeyup="totalSub()" name="CheckSSCVat" id="checksscvat">*@
                                        </div>
                                    </div>
                                    <label for="accessname" class="col-md-9 col-sm-9">Master Date<font size="2px" color="red"></font></label>
                                </div>

                            </div>
                            <div class="form-group col-md-10 col-sm-12 ">
                                <label for="accessname" class="col-md-3 col-sm-5">To Date<font size="2px" color="red">*</font></label>
                                <div class="col-md-4 col-sm-7">
                                    <div class="input-group">
                                        @*@Html.Editor("Ticket_Date", new { htmlAttributes = new { @class = "datepicker1" } })*@
                                        <input type="text" class="form-control datepicker" name="ToDate" id="DateTo" placeholder="To Date" data-format="mm/dd/yyyy">
                                        <div class="input-group-addon">
                                            <a href="#"><i class="fa fa-calendar"></i></a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="col-sm-1">
                                        <div class="required">
                                            <input id="checkflightdate" type="radio" value="FlightDate" name="Flight_Date" />
                                            @*<input type="hidden" value="false" name="CheckSSCVat" />*@
                                            @*<input type="checkbox" onkeyup="totalSub()" name="CheckSSCVat" id="checksscvat">*@
                                        </div>
                                    </div>
                                    <label for="accessname" class="col-md-9 col-sm-9">Flight Date<font size="2px" color="red"></font></label>
                                </div>
                            </div>

                        </div>
                        <div id="itemwise">
                            <div class="form-group col-md-10 col-sm-12 ">
                                <label for="accessname" class="col-md-3 col-sm-5">From Item<font size="2px" color="red"></font></label>
                                <div class="col-md-4 col-sm-7">

                                    @*@Html.Editor("Ticket_Date", new { htmlAttributes = new { @class = "datepicker1" } })*@
                                    @*@Html.EditorFor(model => model.MAWB, new { htmlAttributes = new { @class = "form-control",@readonly= "readonly", placeholder = "From Destination",id="fromitem" } })*@
                                    <input name="From_Item" textbox id="fromitem" readonly="readonly" placeholder="From Item" class="form-control" type="text">

                                </div>
                                <div class="col-md-3">
                                    <div class="col-sm-1">
                                        <div class="required">
                                            <input id="allitemcheck" value="" type="checkbox" checked="checked" name="CheckSSCVat" />
                                            @*<input type="hidden" value="false" name="CheckSSCVat" />*@
                                            @*<input type="checkbox"  onkeyup="totalSub()" name="CheckSSCVat" id="checksscvat">*@
                                        </div>
                                    </div>
                                    <label for="accessname" class="col-md-9 col-sm-9">All Item <font size="2px" color="red"></font></label>
                                </div>

                            </div>



                            <div class="form-group  ">
                                <div class="form-group col-md-10 col-sm-12 ">
                                    <label for="accessname" class="col-md-3 col-sm-5">To Item<font size="2px" color="red"></font></label>
                                    <div class="col-md-4 col-sm-7">
                                        <input name="From_Item" textbox id="toitem" placeholder="To Item" readonly="readonly"  class="form-control" type="text">
                                        @*@Html.EditorFor(model => model.MAWB, new { htmlAttributes = new { @class = "form-control",@readonly= "readonly", placeholder = "To Destination",id="toitem" } })*@
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div id="groupwise">
                            <div class="form-group col-md-10 col-sm-12 ">
                                <label for="accessname" class="col-md-3 col-sm-5">From Group<font size="2px" color="red"></font></label>
                                <div class="col-md-4 col-sm-7">

                                    @*@Html.Editor("Ticket_Date", new { htmlAttributes = new { @class = "datepicker1" } })*@
                                    @Html.EditorFor(model => model.MAWB, new { htmlAttributes = new { @class = "form-control",@readonly= "readonly", placeholder = "From Group",id="fromgroup" } })

                                </div>
                                <div class="col-md-3">
                                    <div class="col-sm-1">
                                        <div class="required">
                                            <input id="allgroupcheck" type="checkbox" value="true"  checked="checked" name="CheckSSCVat"  />
                                            <input type="hidden" value="false" name="CheckSSCVat" />
                                            @*<input type="checkbox"  onkeyup="totalSub()" name="CheckSSCVat" id="checksscvat">*@
                                        </div>
                                    </div>
                                    <label for="accessname" class="col-md-9 col-sm-9">All Group <font size="2px" color="red"></font></label>
                                </div>

                            </div>



                            <div class="form-group  ">
                                <div class="form-group col-md-10 col-sm-12 ">
                                    <label for="accessname" class="col-md-3 col-sm-5">To Group<font size="2px" color="red"></font></label>
                                    <div class="col-md-4 col-sm-7">
                                        @Html.EditorFor(model => model.MAWB, new { htmlAttributes = new { @class = "form-control",@readonly= "readonly", placeholder = "To Group",id="togroup" } })
                                    </div>
                                </div>
                            </div>

                        </div>


                        <div class="form-group col-md-10 col-sm-12 ">
                            <div class="col-md-10">
                                <div align="center">
                                    @*<a href="@Url.Action("Export","CustomerTypeInformation")">Export Report</a>*@
                                    @*<a class="btn btn-primary" style="margin-left:10px" onclick="location.href='@Url.Action("Index", "ReportInformation")'"><i class="fa fa-plus"></i>Back To List</a>*@
                                    <input type="button" value="Download PDF" onclick="pdfExportCheck()" class="btn btn-info" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

}



@section scripts{
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/resources/demos/style.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    @*<script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>*@
    <!-- Load jQuery UI Main JS  -->



    <script>

    //function pdfExportCheck() {


    //    var fromdate= $('#DateFrom').val();
    //    var todate = $('#DateTo').val();


    //    $.ajax({
    //        //url: '/Report?fromdate=' + fromdate + '&todate=' + todate+'',
    //        url: '/CargoSalesReport/Export?fromdate=' + fromdate + '&todate=' + todate + '',

    //                success: function (response) {

    //                }
    //        });
    //    }


        //$("#Status").html("checking...........");
    function pdfExportCheck() {
        //$.post("@Url.Action("Export", "CargoSalesReport")",
             var fromdate= $('#DateFrom').val();
             var todate = $('#DateTo').val();
             var reportname = $('#reportname').val();
             //$('#checkmasterdate').click(function () {
             if ($('#checkmasterdate').is(':checked')) {
                 var checkdate = $("#checkmasterdate").val();
                     //var checkdate = $("input[name='date']:checked").val();
                     //$("#checkmasterdate").val();
                     $("#checkflightdate").prop("checked", false);
                     //alert("Checkbox is checked.");
                 }
             //});
             //$('#checkflightdate').click(function () {
                 if ($('#checkflightdate').is(':checked')) {
                      var checkdate = $("#checkflightdate").val();
                     //var checkdate = $("input[name='Date']:checked").val();
                     //var checkflightdate = $("#checkflightdate").val();
                    // alert("checkflightdate");

                     $("#checkmasterdate").prop("checked", false);
                     //alert("Checkbox is checked.");
             }

                 if ($('#allitemcheck').is(':checked')) {
                     $("#allitemcheck").val("true");
                     //var x = document.getElementById("allitemcheck").value;
                     //$('#allitemcheck').value == "true";
                     var allitemcheck = $('#allitemcheck').val();
                     var fromItem = $('#fromitem').val();
                     var toItem = $('#fromitem').val();
                    // $(this).attr('value', 'true');
                     //var allitemcheck = $("#allitemcheck").attr('value', 'true');
                     //var allitemcheck = $('#allitemcheck').val("true");
                    // alert(allitemcheck);
                 //    //var checkdate = $("input[name='date']:checked").val();
                 //    //$("#checkmasterdate").val();
                 //    //$("#allitemcheck").prop("checked", false);
                 //    //alert("Checkbox is checked.");
                 }
                 else {
                    // var allitemcheck = $("#allitemcheck").val();
                     $("#allitemcheck").val("false");
                     //var x = document.getElementById("allitemcheck").value;
                     //$('#allitemcheck').value == "true";
                     var allitemcheck = $('#allitemcheck').val();
                     var fromItem = $('#fromitem').val();
                     var toItem = $('#fromitem').val();
                 }
            
             //var checkmaster = $("#checkmasterdate").val();
             //var checkflight = $("#checkflightdate").val();

             window.open('/CargoSalesReport/Export?fromdate=' + fromdate + '&todate=' + todate + ' &reportname=' + reportname + '&checkdate=' + checkdate + ' &fromitem=' + fromItem + ' &toitem=' + toItem + ' &allitemcheck=' + allitemcheck+'',

            {
               // fromdate: $('#DateFrom').val(),
               // todate: $('#DateTo').val()
                //toDataa: $('#toticketNo').val()

            },
            @*function (result) {
                if (result.success == true) {
                    window.open("@Url.Action("Export", "CargoSalesReport")",
                )}
            });*@

            )
            }



        //cargo type
        //$("#fromitem").keyup(function () {
        //    var cargotypeData = $("#fromitem").val();
        //    if (cargotypeData === '') {
        //        $('#cargocode').val('');
        //    }
        //    else
        //        var jsonData = { cargotype_Name: cargotypeData };
        //    $("#ReceivedIdErrorMessage").text("");
        //    $.ajax({
        //        type: "POST",
        //        url: "/CargoSalesReport/GetcargotypeCodeById",
        //        contentType: "application/json; charset=utf-8",
        //        data: JSON.stringify(jsonData),
        //        dataType: "json",
        //        success: function (data) {
        //            // alert("Success ");
        //            $("#cargocode").val(data.Cargo_Code);

        //        },
        //    });

        //    return false;

        //});
        //$(document).ready(function () {
        $("#fromitem").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "/CargoSalesReport/Get_CargoType_From_Item",
                    type: "POST",
                    dataType: "json",
                    data: { Prefix: request.term },

                    success: function (data) {

                        response($.map(data, function (item) {

                            return {
                                label: item,
                                value: item,


                            };


                        }))

                    }
                })
            },
            messages: {
                noResults: "",
                results: function (count) {
                    return count + (count > 1 ? ' results' : ' result ') + ' found';
                }
            }
        })


        $("#toitem").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "/CargoSalesReport/Get_CargoType_To_Item",
                    type: "POST",
                    dataType: "json",
                    data: { Prefix: request.term },

                    success: function (data) {

                        response($.map(data, function (item) {

                            return {
                                label: item,
                                value: item,


                            };


                        }))

                    }
                })
            },
            messages: {
                noResults: "",
                results: function (count) {
                    return count + (count > 1 ? ' results' : ' result ') + ' found';
                }
            }
        })
            //});


    </script>
    @*<script type="text/javascript">
             $(function () {
                 $('#DateFrom').datetimepicker();
             });
        </script>*

         <script type="text/javascript">
                 $("#DateTo").change(function () {
                     var DateFrom = $('#DateFrom').val();
                     //alert(DateFrom);
                     var DateTo = $('#DateTo').val();
                     if (DateFrom > DateTo) {
                         //alert(DateTo);
                         swal("Please Enter valid End Date!!!");
                         $('#DateTo').val("");
                     }
             });

             </script>
        @*<link href="~/Content/themes/base/jquery-ui.min.css" rel="stylesheet" />*@


    @*<script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>
        <script src="~/Scripts/jquery-3.0.0.min.js"></script>
        <script type="text/javascript">
            $(function () {
                $(".date-picker").datepicker({
                    dateFormat: 'dd-M-yy'
                });

            });

        </script>*@




    <script type="text/javascript">
        jQuery.noConflict()(function ($) {

            $(function () {
                $("#DateFrom").datepicker();
                $("#DateTo").datepicker();

            });
            $(function () {
                //$("#mawbtextbox").hide()
                $("#datewise").hide()
                $("#itemwise").hide()
                $("#groupwise").hide()

                $("#reportname").change(function () {
                    var reportName = $("#reportname").val();
                    if (reportName == null) {

                    }
                    else

                        if (reportName == "DAILY REPORT-DATE-ITEM-GROUP WISE(GROUP BY ITEM) ") {
                            $('#checkmasterdate').click(function () {
                                if ($('#checkmasterdate').is(':checked')) {
                                    $("#checkmasterdate").val();
                                    $("#checkflightdate").prop("checked", false);
                                    //alert("Checkbox is checked.");
                                }
                            });
                            $('#checkflightdate').click(function () {
                                if ($('#checkflightdate').is(':checked')) {
                                    $("#checkflightdate").val();
                                    $("#checkmasterdate").prop("checked", false);
                                    //alert("Checkbox is checked.");
                                }
                            });
                            $('#allitemcheck').click(function () {
                                if ($(this).is(':checked')) {
                                    $('#fromitem').prop('readonly', true);
                                    $('#toitem').prop('readonly', true);

                                    // alert("Checkbox is checked.");
                                }
                                else {

                                    $('#fromitem').prop('readonly', false);
                                    $('#toitem').prop('readonly', false);
                                }
                            });

                            $('#allgroupcheck').click(function () {
                                if ($(this).is(':checked')) {
                                    $('#fromgroup').prop('readonly', true);
                                    $('#togroup').prop('readonly', true);

                                    // alert("Checkbox is checked.");
                                }
                                else {

                                    $('#fromgroup').prop('readonly', false);
                                    $('#togroup').prop('readonly', false);
                                }
                            });

                            //if ($(allgroupcheck).is(":checked")) {
                            //    $('#fromgroup').prop('readonly', true);
                            //    $('#togroup').prop('readonly', true);

                            //    // alert("Checkbox is checked.");
                            //}
                            //else {
                            //    $('#fromgroup').prop('readonly', false);
                            //    $('#togroup').prop('readonly', false);
                            //}

                            $("#datewise").show();
                            //$("#mawbtextbox").show();
                            $("#itemwise").show();
                            $("#groupwise").show();
                            //pdfExportCheck();

                        }

                    //var t = $("#droplistID").val();
                    //if ($(this).val() == '1101') {
                    //  $("#mawbtextbox").show();
                    // }
                    //  $(this).val() == 'select' ? $("#mawbtextbox").hide() : $("#mawbtextbox").show();
                    //});
                });

            });
        });
    </script>









}
