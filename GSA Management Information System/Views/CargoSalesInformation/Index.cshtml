@model IEnumerable<GSA_Management_Information_System.Models.CargoSalesInformation>

@{
    ViewBag.Title = "Index";

}
<style>
    th {
        background-color: #6495ED;
        line-height: 1.0;
        
        
    }
</style>

<div class="container">
    <div class="card ">
        <div class="card-header bg-info" style="height: 4rem;">Cargo Sales Information</div>
        <br />
        <div class="row">

            <div class="btn-group">
                <a class="btn btn-success" style="margin-left:30px" onclick="location.href='@Url.Action("Create", "CargoSalesInformation")'"><i class="fa fa-plus"></i>Add New</a>
            </div>
            <br />
            <br />
        </div>
        <div class="card " style="margin-left: 15px; margin-right: 15px">
            <div class="row" style="margin-left: 10px; margin-right: 10px">
                <table id="example" class="table table-striped table-bordered table-sm " cellspacing="0"
                       width="8000">
                    <thead>
                        <tr>
                            <th>CargoSalesId</th>
                            <th>SalesSlno</th>
                            <th>MAWB</th>
                            <th>SIssued_Code</th>
                            <th>Check_Digit</th>
                            <th>Airway_No</th>
                            <th>Flight_Date</th>
                            <th>Freighter_Code</th>
                            <th>Freighter</th>
                            <th>Origin_Code</th>
                            <th>Origin</th>
                            <th>Dest_Code</th>
                            <th>Destination</th>
                            <th>Continent_Code</th>
                            <th>Continent</th>
                            <th>Payment_Mode</th>
                            <th>Payment</th>
                            <th>CFPaymode_Code</th>
                            <th>CargoFreightPaymode</th>
                            <th>Route_Code</th>
                            <th>Route</th>
                            <th>Customer_Code</th>
                            <th>Customer</th>
                            <th>Cargo_Code</th>
                            <th>CargoType</th>
                            <th>UType_Code</th>
                            <th>Upliment</th>
                            <th>Consignee_Code</th>
                            <th>Consignee_Name</th>
                            <th>Consignee_Address</th>
                            <th>Consignor_Code</th>
                            <th>Consignor_Name</th>
                            <th>Consignor_Address</th>
                            <th>HDS</th>
                            <th>AMS</th>
                            <th>Gross_Weight</th>
                            <th>Chargeable_Weight</th>
                            <th>Rate_Charge</th>
                            <th>B_Rate</th>
                            <th>AIT</th>
                            <th>Agent_Commission</th>
                            <th>HBL_Qty</th>
                            <th>Others</th>
                            <th>THC</th>
                            <th>SSC</th>
                            <th>FSC_Charge</th>
                            <th>ISS_Charge</th>
                            <th>CheckSSCVat</th>
                            <th>SSC_VAT</th>
                            <th>Total_USD</th>
                            <th>Total_USD_With_SSC_Vat</th>
                            <th>Currency_Code</th>
                            <th>Exchange_Rate</th>
                            <th>Receivable_Amount_BDT</th>
                            <th>Receivable_Amount_USD_With_SSC_VAT</th>
                            <th>Remarks</th>
                            <th>Remarks_B_Bank</th>
                            <th>Entry_Date</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                </table>



                <div class="row">
                    <link href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap.min.css" rel="stylesheet" />

                    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
                    @section scripts{
                        <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
                        <script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap.min.js"></script>
                        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.css">
                        <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.js"></script>
                        <link rel="stylesheet" type="text/css" href="/DataTables/datatables.css">
                        <script type="text/javascript" charset="utf8" src="/DataTables/datatables.js"></script>
                        <script src="~/Scripts/notify.min.js"></script>
                        <script>
            var Popup, dataTables;
            jQuery.noConflict()(function ($) {
                $(document).ready(function () {
                    dataTables = $("#example").DataTable({
                        //"serverSide": true,
                        "scrollX": true,
                        "scrollY": "300px",
                        "scrollCollapse": true,
                        "paging": true,
                        "ajax": {
                            "url": "/CargoSalesInformation/GetData",
                            "type": "GET",
                            "datatype": "JSON"

                        },

                            "columns": [
                                { "data": "CargoSalesId", "visible": false },
                                { "data": "SalesSlno", "visible": false },
                                { "data": "MAWB" },                             
                                { "data": "SIssued_Code", "visible": false },
                                { "data": "Check_Digit", "visible": false },
                                { "data": "Airway_No", "visible": false},
                                { "data": "Flight_Date", "visible": false },
                                { "data": "Freighter_Code", "visible": false },
                                { "data": "Freighter" },
                                { "data": "Origin_Code", "visible": false },
                                { "data": "Origin" },
                                { "data": "Dest_Code", "visible": false },
                                { "data": "Destination" },
                                { "data": "Continent_Code", "visible": false},
                                { "data": "Continent" },
                                { "data": "Payment_Mode", "visible": false },
                                { "data": "Payment"},
                                { "data": "CFPaymode_Code", "visible": false },
                                { "data": "CargoFreightPaymode" },
                                { "data": "Route_Code", "visible": false},
                                { "data": "Route" },
                                { "data": "Customer_Code", "visible": false },
                                { "data": "Customer" },
                                { "data": "Cargo_Code", "visible": false },
                                { "data": "CargoType" },
                                { "data": "UType_Code", "visible": false },
                                { "data": "Upliment" },
                                { "data": "Consignee_Code", "visible": false},
                                { "data": "Consignee_Name" },
                                { "data": "Consignee_Address" },
                                { "data": "Consignor_Code", "visible": false },
                                { "data": "Consignor_Name" },
                                { "data": "Consignor_Address" },
                                { "data": "HDS" },
                                { "data": "AMS" },
                                { "data": "Gross_Weight" },
                                { "data": "Chargeable_Weight" },
                                { "data": "Rate_Charge" },
                                { "data": "B_Rate" },
                                { "data": "AIT" },
                                { "data": "Agent_Commission" },
                                { "data": "HBL_Qty" },
                                { "data": "Others_Charges" },
                                { "data": "THC" },
                                { "data": "SSC" },
                                { "data": "FSC_Charge" },
                                { "data": "ISS_Charge" },
                                { "data": "IsSSCVAT" },
                                { "data": "SSC_VAT" },
                                { "data": "Total_USD" },
                                { "data": "Total_USD_With_SSC_Vat", "visible": false },
                                { "data": "Currency_Code" },
                                { "data": "Exchange_Rate" },
                                { "data": "Receivable_Amount_BDT", "visible": false },
                                { "data": "Receivable_Amount_USD_With_SSC_VAT", "visible": false },
                                { "data": "Remarks", "visible": false},
                                { "data": "Remarks_B_Bank", "visible": false },
                                { "data": "Entry_Date", "visible": false },
                                {
                                    "data": "CargoSalesId", "render": function (data) {
                                        return "<a class='btn btn-default btn-sm' onclick=location.href='@Url.Action("Edit", "CargoSalesInformation")/" + data + "'><i class='fa fa-pencil'></i> Edit</a><a class='btn btn-danger btn-sm'style='margin-left:5px'onclick=Return(" + data + ")><i class='fa fa-trash'></i> Return</a>"
                                },
                                "orderable": false,
                                "searchable": false,
                                "width": "150px"
                            }


                        ],


                        "language": {
                            "emptyTable": "No data found, please click on <b>Add New</b> Button"
                        }
                    });
                });
            });


                    function SubmitForm(form) {
                        $.ajax({
                            type: "post",
                            url: form.action,
                            data: $(form).serialize(),
                            success: function (data) {
                                if (data.success) {
                                    alert("I am alert box!");
                                    dataTables.ajax.reload();
                                    $.notify(data.message, {
                                        globalPosition: "top center",
                                        className: "success"


                                    })


                                    Popup.dialog('close');

                                }
                                }

                        });

                        return false;
                    }





                    function Return(id) {

                        if (confirm('Are you sure you want to Retrun this Cargo record ?'))
                        {
                            $.ajax({
                                type: "post",
                                url: '@Url.Action("Return", "CargoSalesInformation")/' + id,
                                success: function (data) {

                                    if (data.success) {
                                        dataTables.ajax.reload();

                                        $.notify(data.message, {
                                            globalPosition: "top center",
                                            className: "success"

                                        })


                                    }
                                }
                            });
                        }
                    }

                        </script>

                        <script type="text/javascript">

                            $('table table-striped table-bordered table-sm').each(function () {
                                var currentPage = 0;
                                var numPerPage = 10;
                                var $table = $(this);
                                $table.bind('repaginate', function () {
                                    $table.find('tbody tr').hide().slice(currentPage * numPerPage, (currentPage + 1) * numPerPage).show();
                                });
                                $table.trigger('repaginate');
                                var numRows = $table.find('tbody tr').length;
                                var numPages = Math.ceil(numRows / numPerPage);
                                var $pager = $('<div class="pager"></div>');
                                for (var page = 0; page < numPages; page++) {
                                    $('<span class="page-number"></span>').text(page + 1).bind('click', {
                                        newPage: page
                                    }, function (event) {
                                        currentPage = event.data['newPage'];
                                        $table.trigger('repaginate');
                                        $(this).addClass('active').siblings().removeClass('active');
                                    }).appendTo($pager).addClass('clickable');
                                }

                                $pager.insertAfter($table).find('span.page-number:first').addClass('active');


                            });
                        </script>
                    </div>
                </div>
            </div>
        </div>

                    }

                </div>
